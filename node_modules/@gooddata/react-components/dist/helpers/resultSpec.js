"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// (C) 2007-2018 GoodData Corporation
var typings_1 = require("@gooddata/typings");
var dimensions_1 = require("./dimensions");
var conversion_1 = require("./conversion");
var generateDefaultDimensionsFromBuckets = function (buckets) {
    return dimensions_1.generateDefaultDimensions(conversion_1.convertBucketsToAFM(buckets));
};
var copySortItem = function (sortByItem) {
    if (typings_1.AFM.isAttributeSortItem(sortByItem)) {
        return {
            attributeSortItem: sortByItem.attributeSortItem,
        };
    }
    return {
        measureSortItem: sortByItem.measureSortItem,
    };
};
function getResultSpec(buckets, sortBy, getDimensions) {
    if (sortBy === void 0) { sortBy = null; }
    if (getDimensions === void 0) { getDimensions = generateDefaultDimensionsFromBuckets; }
    var resultSpec = {
        dimensions: getDimensions(buckets),
    };
    if (sortBy && sortBy.length) {
        resultSpec.sorts = sortBy.map(copySortItem);
    }
    return resultSpec;
}
exports.getResultSpec = getResultSpec;
function getStackingResultSpec(buckets, sortBy) {
    if (sortBy === void 0) { sortBy = null; }
    var getDimensions = dimensions_1.isStackedChart(buckets) ? dimensions_1.generateStackedDimensions : undefined;
    return getResultSpec(buckets, sortBy, getDimensions);
}
exports.getStackingResultSpec = getStackingResultSpec;
//# sourceMappingURL=resultSpec.js.map