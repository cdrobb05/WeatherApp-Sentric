"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// (C) 2007-2018 GoodData Corporation
var env_1 = require("./env");
var load_script_1 = require("./load-script");
exports.GDC_WALKME_HASH = '325ea4b9b547463c991a62bf54090302';
var GDC_WALKME_URL = 'https://cdn.walkme.com/users';
function getEnvironment(walkmeHashFromWhiteLabel, environment) {
    if (environment) {
        return environment;
    }
    else if (walkmeHashFromWhiteLabel === exports.GDC_WALKME_HASH && !env_1.isProductionHostname(window.location.hostname)) {
        return 'test';
    }
    return '';
}
function generateFinalUrl(walkmeHashFromWhiteLabel, environment) {
    var env = getEnvironment(walkmeHashFromWhiteLabel, environment);
    return [
        GDC_WALKME_URL,
        walkmeHashFromWhiteLabel,
        env,
        'walkme_' + walkmeHashFromWhiteLabel + '_https.js'
    ].filter(function (bit) { return bit !== ''; })
        .join('/');
}
exports.generateFinalUrl = generateFinalUrl;
function load(walkmeHash, walkMeEnvironment) {
    if (!walkmeHash) {
        return Promise.resolve();
    }
    var url = generateFinalUrl(walkmeHash, walkMeEnvironment);
    window._walkmeConfig = { smartLoad: true };
    return load_script_1.loadScript(url) // load walkme script
        .catch(function () {
        // tslint:disable-next-line:no-console
        console.log("Error loading walkme library. Please check the presence of " + url);
    });
}
exports.load = load;
//# sourceMappingURL=walkme.js.map