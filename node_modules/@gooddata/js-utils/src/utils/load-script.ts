// (C) 2007-2018 GoodData Corporation
export function loadScript(url: string): Promise<any> {
    if (scriptExists(url)) { return Promise.resolve(); }

    return new Promise((resolve, reject) => {
        const script = createScriptTag(url, resolve, reject);
        document.body.appendChild(script);
    });
}

export function createScriptTag(
    url: string, onLoad: HTMLScriptElement['onload'], onError: HTMLScriptElement['onerror']
): HTMLScriptElement {
    const script = document.createElement('script');
    script.charset = 'utf-8';
    script.type = 'text/javascript';
    script.onload = onLoad;
    script.onerror = onError;
    script.async = true;
    script.src = url;
    return script;
}

export function scriptExists(url: string): boolean {
    const script = url && document.querySelector('script[src=\'" + url + "\']');
    return Boolean(script);
}
