// (C) 2020 GoodData Corporation
import get from 'lodash/get';
import { IFeatureFlags } from './featureFlags';

interface IAccountSetting {
    links: {
        self: string;
    };
}

interface IBootstrapResource {
    current: {
        featureFlags: IFeatureFlags;
    };
    accountSetting: IAccountSetting;
}

export interface IBootstrapData {
    bootstrapResource: IBootstrapResource;
}

export function getUserId(bootstrapData: IBootstrapData): string {
    const uri = get(bootstrapData, 'bootstrapResource.accountSetting.links.self', '');
    const parts = uri.split('/');

    return parts.pop();
}
