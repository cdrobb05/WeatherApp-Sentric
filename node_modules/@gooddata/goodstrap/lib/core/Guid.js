"use strict";

var _interopRequireDefault = require("@babel/runtime-corejs2/helpers/interopRequireDefault");

var _Object$defineProperty2 = require("@babel/runtime-corejs2/core-js/object/define-property");

_Object$defineProperty2(exports, "__esModule", {
  value: true
});

exports.guidFor = guidFor;

var _defineProperty = _interopRequireDefault(require("@babel/runtime-corejs2/core-js/object/define-property"));

// borrowed from Ember
window._gd_uuid = 0; // eslint-disable-line @typescript-eslint/camelcase

function getGuid() {
  window._gd_uuid += 1; // eslint-disable-line @typescript-eslint/camelcase

  var newGuid = window._gd_uuid;
  return newGuid;
}

function guidFor(obj) {
  var GUID_KEY = "__infID";
  var GUID_DESC = {
    writable: false,
    configurable: false,
    enumerable: false,
    value: null
  };
  if (obj[GUID_KEY]) return obj[GUID_KEY];
  if (obj === Object) return "(Object)";
  if (obj === Array) return "(Array)";
  var stamp = "gd-guid-".concat(getGuid());

  if (obj[GUID_KEY] === null) {
    obj[GUID_KEY] = stamp;
  } else {
    GUID_DESC.value = stamp;
    (0, _defineProperty["default"])(obj, GUID_KEY, GUID_DESC);
  }

  return stamp;
}