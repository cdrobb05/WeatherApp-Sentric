"use strict";

var _interopRequireDefault = require("@babel/runtime-corejs2/helpers/interopRequireDefault");

var _Object$defineProperty = require("@babel/runtime-corejs2/core-js/object/define-property");

_Object$defineProperty(exports, "__esModule", {
  value: true
});

exports.createStream = createStream;
exports.createBufferedStream = createBufferedStream;

var _kefir = _interopRequireDefault(require("kefir"));

// (C) 2007-2020 GoodData Corporation
function createStream() {
  var emitter = null; // eslint-disable-next-line import/no-named-as-default-member

  var stream = _kefir["default"].stream(function (_emitter) {
    emitter = _emitter;
    return function () {
      emitter = null;
    };
  });

  function emit() {
    if (emitter) {
      var _emitter2;

      (_emitter2 = emitter).emit.apply(_emitter2, arguments);
    }
  }

  function end() {
    if (emitter) {
      emitter.end();
    }
  }

  return {
    stream: stream,
    emit: emit,
    end: end
  };
}

function createBufferedStream(stream) {
  var debounced$ = stream.debounce(0);
  return stream.bufferBy(debounced$);
}