"use strict";

var _Object$defineProperty = require("@babel/runtime-corejs2/core-js/object/define-property");

_Object$defineProperty(exports, "__esModule", {
  value: true
});

exports.generateHeaderHelpMenuItems = generateHeaderHelpMenuItems;
exports.addUTMParameters = void 0;

var _utils = require("../../Header/utils");

var addUTMParameters = function addUTMParameters(baseUrl, utmContent) {
  var isBranded = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  return isBranded ? baseUrl : "".concat(baseUrl).concat(baseUrl.includes("?") ? "&" : "?", "utm_medium=platform&utm_source=product&utm_content=").concat(utmContent);
};

exports.addUTMParameters = addUTMParameters;

function generateHeaderHelpMenuItems(documentationUrl, supportForumUrl, userEmail, workspaceId, sessionId, supportEmail, isBranded) {
  var featureFlags = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : {};
  var universityUrl = "https://university.gooddata.com";
  var communityUrl = "https://community.gooddata.com";
  var enableUniversityHelpMenuItem = featureFlags.enableUniversityHelpMenuItem,
      enableCommunityHelpMenuItem = featureFlags.enableCommunityHelpMenuItem;
  var helpMenuItems = [];

  if (documentationUrl) {
    helpMenuItems.push({
      key: "gs.header.documentation",
      className: "s-documentation",
      href: addUTMParameters(documentationUrl, "main_menu_help_documentation", isBranded),
      target: "_blank"
    });
  }

  if (!!enableUniversityHelpMenuItem && !isBranded) {
    helpMenuItems.push({
      key: "gs.header.university",
      className: "s-university",
      href: addUTMParameters(universityUrl, "main_menu_help_university", isBranded),
      target: "_blank"
    });
  }

  if (!!enableCommunityHelpMenuItem && !isBranded) {
    helpMenuItems.push({
      key: "gs.header.community",
      className: "s-community",
      href: addUTMParameters(communityUrl, "main_menu_help_community", isBranded),
      target: "_blank"
    });
  }

  if (supportForumUrl) {
    helpMenuItems.push({
      key: "gs.header.visitSupportPortal",
      className: "s-support-portal",
      href: addUTMParameters(supportForumUrl, "main_menu_help_support", isBranded),
      target: "_blank"
    });
  }

  if (!isBranded) {
    var supportUrl = (0, _utils.generateSupportUrl)(workspaceId, sessionId, userEmail, window.location.href);
    helpMenuItems.push({
      key: "gs.header.submitTicket",
      className: "s-submit-ticket",
      href: addUTMParameters(supportUrl, "main_menu_help_ticket", isBranded),
      target: "_blank"
    });
  } else if (supportEmail) {
    helpMenuItems.push({
      key: "gs.header.submitTicket",
      className: "s-submit-ticket",
      href: "mailto:".concat(supportEmail),
      target: "_blank"
    });
  }

  return helpMenuItems;
}